nginx:
  build: images/nginx
  links:
    - webpay
    - solitude
  ports:
    - '80:80'
  volumes:
    - trees/spartacus/public/:/srv/spartacus

mysqldata:
  build: images/mysql-data

mysqlservice:
  build: images/mysql-service
  volumes_from:
    - mysqldata

solitude:
  build: trees/solitude
  working_dir: /src
  volumes:
    - trees/solitude/:/src
  links:
    - mysqlservice
  command: python manage.py runserver
  working_dir: /src

spartacus:
  build: trees/spartacus/
  volumes:
    - trees/spartacus/:/spartacus/src
  command: "grunt docker"
  working_dir: /spartacus/src

webpay:
  build: trees/webpay/
  command: python manage.py runserver 0.0.0.0:2601
  volumes:
    - trees/webpay/:/src
